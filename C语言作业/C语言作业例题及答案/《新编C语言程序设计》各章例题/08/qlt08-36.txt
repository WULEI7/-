#include <stdio.h>
#include<time.h>
#include<stdlib.h>
int human(int t)
{ int num;
  do{
    printf("Please count(1 or 2):"); scanf("%d",&num);
    if(num>2||num<1||t+num>30) printf("Error input, again!");
    else printf("You count:%d\n",t+num);//当前你抢到的数
  }while(num>2||num<1||t+num>30); return t+num; /*返回当前的抢数*/
}
int computer(int t)
{ int c; printf("Computer count:");
  if((t+1)%3==0) printf(" %d\n",++t);  /*若剩余的数的模为1，则取1*/
  else if((t+2)%3==0){ t+=2;printf(" %d\n",t);}/*若剩余的数的模为2，则取2*/
  else {c=random(2)+1; t+=c;printf(" %d\n",t);}/*否则随机取1或2*/
  return t;
}
void main()
{ int ct=0;printf("\n******Catch Thirty******\n******Game Begin******\n");
  randomize();                     /*初始化随机数发生器*/
  if(random(2)==1) ct=human(ct);   /*取随机数决定机器和人谁先抢*/
  while(ct!=30)                    /*游戏结束条件*/
   if((ct=computer(ct))==30)
      printf("\nComputer wins!\n");/*计算机取一个数，若为30则机器胜*/
   else if((ct=human(ct))==30)printf("\nHuman wins!\n");/*人取一个数，若为30则人胜*/
  printf("******Game Over******\n");
}
